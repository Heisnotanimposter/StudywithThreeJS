<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <title>Three.js Cylinder Geometry with GUI control</title>

    <style>

        body { margin: 0; }

        canvas { display: block; }

    </style>

</head>

<body>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>

    <script>


        var scene = new THREE.Scene();

        var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);

        var renderer = new THREE.WebGLRenderer();

        renderer.setSize(window.innerWidth, window.innerHeight);

        document.body.appendChild(renderer.domElement);

        const params = {
            radiusTop: 3,

            radiusBottom: 2,

            height: 8,

            radialSegments: 12,

            heightSegments: 2,

            openEnded: true,

            thetaStart: Math.PI * 0.9,
            thetaLength: Math.PI * 1.5,
            color: 0xffffff
        };

        var geometry = new THREE.CylinderGeometry(
            params.radiusTop,        // [1] The radius of the cylinder at the top.
            params.radiusBottom,     // [2] The radius of the cylinder at the bottom.
            params.height,           // [3] The height of the cylinder.
            params.radialSegments,   // [4] The number of segmented faces around the circumference.
            params.heightSegments,   // [5] The number of rows of faces along the height.
            params.openEnded,        // [6] Whether the ends of the cylinder are open or capped.
            params.thetaStart,       // [7] The starting angle for the first segment, in radians.
            params.thetaLength       // [8] The central angle, in radians, over which the cylinder extends.
        );


        var material = new THREE.MeshBasicMaterial({ color: params.color });

        var cylinder = new THREE.Mesh(geometry, material);

        scene.add(cylinder);

        camera.position.z = 20;


        var gui = new dat.GUI();

        gui.add(params, 'radiusTop', 0, 10).onChange(updateGeometry);

        gui.add(params, 'radiusBottom', 0, 10).onChange(updateGeometry);

        gui.add(params, 'height', 0, 20).onChange(updateGeometry);

        gui.add(params, 'radialSegments', 3, 32).step(1).onChange(updateGeometry);

        gui.add(params, 'heightSegments', 1, 10).step(1).onChange(updateGeometry);

        gui.add(params, 'openEnded').onChange(updateGeometry);

        gui.add(params, 'thetaStart', 0, 2 * Math.PI).onChange(updateGeometry);

        gui.add(params, 'thetaLength', 0, 2 * Math.PI).onChange(updateGeometry);

        gui.addColor(params, 'color').onChange(updateMaterial);

        function updateGeometry() {
            scene.remove(cylinder);
            geometry = new THREE.CylinderGeometry(

                params.radiusTop, params.radiusBottom, params.height,

                params.radialSegments, params.heightSegments,

                params.openEnded, params.thetaStart, params.thetaLength
            );

            cylinder = new THREE.Mesh(geometry, material);

            scene.add(cylinder);
        }

        function updateMaterial() {

            material.color.set(params.color);
        }

        function animate() {

            requestAnimationFrame(animate);

            cylinder.rotation.x += 0.003;

            cylinder.rotation.y += 0.003;

            renderer.render(scene, camera);
        }

        animate();

    </script>
</body>
</html>

